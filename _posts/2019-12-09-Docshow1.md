---
title: DevOps -- Client Side DocShow
---



在C-S的音视频PaaS系统中，C端通常会碰到以下问题：

* Client端设备的多样性，不同的Device，安卓，IOS，Windows，不同厂家，华为，Oppo很多特性不同，Client端需要一种灵活的方式获取相应的配置。
* 由于时PaaS系统，Client端可能存在很多版本，并且我们并不能控制第三方厂家强制升级Client SDK。
* 如果线上出现问题，需要能在不修改Client端代码的情况下，完成对Client端配置的修改。



为了解决上述问题引入了DocShow机制。 Client端每次在加入频道（最核心的动作），服务器端通过加入频道的API返回给客户端配置信息。此配置信息维护了不同Device，厂家，不同场景的不同配置参数。服务器端通过客户端上传的参数，合成对应的配置，将其返回给客户端，客户端将参数配置在client。



以下问题：

>  如何处理Client多版本的情况？例如版本1.0 和 版本2.0的参数不同。

Server端总是返回最新的参数集合，最新的参数集合是所有版本的超集。因此，拥有最全的配置信息，低版本的客户端仅会查询支持的参数，其他参数忽略。



> 如何解决不同OS，Device不同配置的问题。

测试人员会测试不同的OS，Device获取一份合理的配置。这份配置以JSON形式保存类似如下：

```
{
"ios": {
     "common": { ... },
     "iPhone":{},
     "iPhone#iPhone11,8": {},
     
},
"aos": {...},
...
}
```

在不同平台中，都有默认的common配置，如果没有合适的配置，则选取common配置。

对于不同的DEVICE类型，例如iphone，ipad等，有设备级别的配置，对于不同的型号，例如iPhoneX，iPhone11有相应具体型号的配置，当配置越细，则参数优先级越高，如果没有详细配置，则使用上一级的配置，如果没有找到任何具体配置信息，则说明此型号完全不支持，使用common配置。(利用JSON Merge可以很容易做到)

针对不同的使用场景，例如VOIP，音乐等具体场景，可能配置会完全不同，也可以利用此机制进行具体配置。

