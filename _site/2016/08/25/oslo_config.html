<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Openstack Lib - oslo.config</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,600">
  <link rel="stylesheet" href="/style.css">
  </head>
<body>
  <div class="container">
    <header class="masthead">
  <h1 class="masthead-title--small">
    <a href="/">Liping Mao</a>
  </h1>
</header>      
<div class="content post">
  <h1 class="post-title">Openstack Lib - oslo.config</h1>
  <div class="post-date">
    <time>25 Aug 2016</time>
  </div>
  <h2 id="backgroup">Backgroup</h2>
<blockquote>
  <p>Reduce duplicated code in different openstack project.</p>
</blockquote>

<h2 id="basic-usage">Basic Usage</h2>
<blockquote>
  <p>Here is a sample which help you have a basic and quick use oslo.config</p>
</blockquote>

<p><strong>Basic Usage Sample:</strong></p>

<p>Create file named “app”:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/python</span>

<span class="c"># import cfg from oslo_config</span>
<span class="kn">from</span> <span class="nn">oslo_config</span> <span class="kn">import</span> <span class="n">cfg</span>

<span class="c"># define options which you need to use</span>
<span class="n">opts</span> <span class="o">=</span> <span class="p">[</span><span class="n">cfg</span><span class="o">.</span><span class="n">StrOpt</span><span class="p">(</span><span class="s">'test'</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">'helo world'</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="p">(</span><span class="s">'help messaage'</span><span class="p">))]</span>
<span class="n">CONF</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">CONF</span>

<span class="c"># register opts in group, if the group does not existed, it will help you auto create</span>
<span class="n">CONF</span><span class="o">.</span><span class="n">register_opts</span><span class="p">(</span><span class="n">opts</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="s">'limao'</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="c"># oslo_config will find your config in /etc/{project}/{name_of_process}.conf</span>
    <span class="c"># if you did not have default_config_files here.</span>
    <span class="n">CONF</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="s">'limao'</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">'CONF.limao.test </span><span class="si">%</span><span class="s">s'</span> <span class="o">%</span> <span class="n">CONF</span><span class="o">.</span><span class="n">limao</span><span class="o">.</span><span class="n">test</span>
</code></pre>
</div>

<p>Create a config file in /etc/limao/app.conf:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[limao]
test = 'Real world'
</code></pre>
</div>

<p>Test code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code># python app
CONF.limao.test Real world
</code></pre>
</div>

<h2 id="refer-doc">Refer Doc</h2>
<ol>
  <li><a href="http://docs.openstack.org/developer/oslo.config/cfg.html">oslo.config developer doc</a></li>
</ol>


</div>

  </div>
</body>
</html>
